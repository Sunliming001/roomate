<view class="container" style="padding-top: {{paddingTop}}px">
  <!-- ä¸ªäººå¡ç‰‡ -->
  <view class="profile-card">
    <view class="p-top">
      <image class="avatar" src="{{user.avatarUrl || '/images/default.png'}}"></image>
      <view class="p-info">
        <view class="name">{{user.nickName || 'è¯·å…ˆç™»å½•'}}</view>
        <view class="tags">
           <text wx:for="{{user.tagList}}" wx:key="*this">{{item}}</text>
        </view>
      </view>
      <view class="edit-btn" bindtap="goEdit">ä¿®æ”¹èµ„æ–™ ></view>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ¨¡å— -->
  <view class="stats-grid">
    <view class="stat-box {{activeTab=='pub'?'active':''}}" bindtap="switchTab" data-tab="pub">
      <view class="num">{{stats.pub}}</view>
      <view class="lbl">æˆ‘çš„å‘å¸ƒ</view>
    </view>
    <view class="stat-box {{activeTab=='fav'?'active':''}}" bindtap="switchTab" data-tab="fav">
      <view class="num">{{stats.fav}}</view>
      <view class="lbl">æˆ‘çš„æ”¶è—</view>
    </view>
    <view class="stat-box {{activeTab=='join'?'active':''}}" bindtap="switchTab" data-tab="join">
      <view class="num">{{stats.join}}</view>
      <view class="lbl">æˆ‘çš„åŠ å…¥</view>
    </view>
  </view>

  <!-- åˆ—è¡¨å±•ç¤ºåŒº -->
  <view class="list-container">
    <view class="list-title">
      {{activeTab=='pub'?'æˆ‘å‘å¸ƒçš„æˆ¿æº':(activeTab=='fav'?'æˆ‘æ”¶è—çš„æˆ¿æº':'æˆ‘åŠ å…¥çš„æˆ¿æº')}}
    </view>
    
    <block wx:for="{{listData}}" wx:key="id">
      <view class="item-card" bindtap="goDetail" data-id="{{item._id}}">
        <image class="i-img" src="{{item.cover}}" mode="aspectFill"></image>
        <view class="i-info">
          <view class="i-title">{{item.community}} {{item.layout.room}}å®¤</view>
          
          <view class="i-status">
             <text class="st-tag {{item.status=='completed'?'gray':'red'}}">
               {{item.status=='completed'?'å·²å®Œæˆ':'æ‹›å‹Ÿä¸­'}}
             </text>
             <text class="price" wx:if="{{item.status!='completed'}}">Â¥{{item.minPrice}}èµ·</text>
          </view>

          <!-- æ–°å¢ï¼šä¿®æ”¹æŒ‰é’® (ä»…åœ¨æˆ‘çš„å‘å¸ƒæ˜¾ç¤º) -->
          <!-- åœ¨ item-card å†…éƒ¨ -->
      <view class="action-row" wx:if="{{activeTab=='pub'}}">
          <!-- è¿™é‡Œå¿…é¡»æ˜¯ catchtapï¼Œä¸”å‡½æ•°åå¿…é¡»æ˜¯ goEditRoom -->
          <view class="edit-btn-small" catchtap="goEditRoom" data-id="{{item._id}}">ğŸ“ ä¿®æ”¹</view>
      </view>

        </view>
      </view>
    </block>

    <view wx:if="{{listData.length===0}}" class="empty-tip">
      æš‚æ— ç›¸å…³å†…å®¹
    </view>
  </view>
</view>