page { 
  background: #F6F6F6; 
  height: 100vh; 
  overflow: hidden; 
}

.container { 
  height: 100%; 
  display: flex; 
  flex-direction: column; 
}

/* 头部固定 */
.custom-header {
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  background: #EDEDED; 
  z-index: 999; 
  border-bottom: 1rpx solid #dcdcdc;
  display: flex; 
  align-items: center;
}

.header-row { 
  width: 100%; 
  height: 100%; 
  display: flex; 
  align-items: center; 
  padding: 0 20rpx; 
  position: relative; 
}

/* --- 核心修改：Q版返回按钮 --- */
.back-btn-q { 
  width: 64rpx; 
  height: 64rpx; 
  background: #FFFFFF; 
  border-radius: 50%; /* 圆形 */
  display: flex; 
  align-items: center; 
  justify-content: center; 
  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.1); /* 悬浮感 */
  z-index: 1000;
}
.back-btn-q:active { transform: scale(0.9); background: #f0f0f0; }

/* 用CSS画一个粗箭头 */
.arrow-icon {
  width: 16rpx;
  height: 16rpx;
  border-left: 4rpx solid #333;
  border-bottom: 4rpx solid #333;
  transform: rotate(45deg);
  margin-left: 6rpx; /* 视觉修正 */
}
/* ------------------------- */

.header-title { 
  position: absolute; 
  left: 50%; 
  transform: translateX(-50%); 
  font-weight: bold; 
  font-size: 32rpx; 
  max-width: 60%; 
  overflow: hidden; 
  white-space: nowrap; 
  text-overflow: ellipsis; 
  text-align: center;
}

.chat-scroll { width: 100%; height: 100%; box-sizing: border-box; }

.msg-container { margin-bottom: 30rpx; display: flex; flex-direction: column; padding: 0 20rpx; }
.align-left { align-items: flex-start; }
.align-right { align-items: flex-end; }

.msg-row { display: flex; align-items: flex-start; max-width: 85%; }
.avatar { width: 70rpx; height: 70rpx; border-radius: 50%; background: #ddd; flex-shrink: 0; margin-right: 16rpx;}

.bubble, .msg-img, .msg-loc { 
  border-radius: 16rpx; position: relative; 
  box-shadow: 0 2rpx 4rpx rgba(0,0,0,0.05);
}
.bubble { padding: 20rpx 28rpx; font-size: 32rpx; line-height: 1.4; word-break: break-all; }
.msg-img { max-width: 300rpx; border-radius: 16rpx; background: #fff; }
.msg-loc { width: 420rpx; background: #fff; padding: 20rpx; border-radius: 16rpx; overflow: hidden; }
.loc-name { font-size: 28rpx; font-weight: bold; margin-bottom: 6rpx; color: #000; }
.loc-addr { font-size: 22rpx; color: #888; margin-bottom: 16rpx; }
.loc-map-placeholder { width: 100%; height: 150rpx; background: #eee; display: flex; align-items: center; justify-content: center; color: #aaa; font-size: 24rpx; border-radius: 8rpx;}

.other-msg { flex-direction: row; }
.other-msg .bubble { background: #FFF; color: #1C1C1E; }

.my-msg { flex-direction: row-reverse; }
.my-msg .avatar { margin-right: 0; margin-left: 16rpx; display: block; }
.my-msg .bubble { 
  background: #34C759; /* 绿色气泡 */
  color: #FFF; 
  border-bottom-right-radius: 8rpx; /* 右下角尖 */
}

.status-row { margin-top: 4rpx; margin-right: 20rpx; text-align: right; }
.read-txt { font-size: 20rpx; color: #999; }
.read-txt.un { color: #ccc; }

.input-area { position: fixed; bottom: 0; width: 100%; background: #F6F6F6; padding: 20rpx; padding-bottom: calc(20rpx + env(safe-area-inset-bottom)); display: flex; align-items: center; border-top: 1rpx solid #dcdcdc; z-index: 1000; transition: bottom 0.1s ease-out; }
.msg-input { flex: 1; background: #FFF; height: 72rpx; border-radius: 12rpx; padding: 0 20rpx; font-size: 30rpx; }
.more-btn { width: 60rpx; height: 60rpx; border-radius: 50%; border: 2rpx solid #7f7f7f; color: #7f7f7f; display: flex; align-items: center; justify-content: center; font-size: 44rpx; line-height: 50rpx; margin-right: 20rpx; font-weight: 300; }
.send-btn { width: 110rpx !important; height: 72rpx; margin-left: 20rpx; background: #34C759; color: #fff; font-size: 28rpx; padding: 0; display: flex; align-items: center; justify-content: center; border-radius: 12rpx; font-weight: 600; }

.more-panel { position: fixed; bottom: 0; left: 0; width: 100%; height: 300rpx; background: #F6F6F6; border-top: 1rpx solid #dcdcdc; z-index: 1001; padding: 40rpx 50rpx; box-sizing: border-box; display: flex; padding-bottom: calc(40rpx + env(safe-area-inset-bottom)); }
.panel-item { display: flex; flex-direction: column; align-items: center; margin-right: 60rpx; }
.p-icon { width: 110rpx; height: 110rpx; background: #FFF; border-radius: 24rpx; display: flex; align-items: center; justify-content: center; font-size: 50rpx; margin-bottom: 16rpx; border: 1rpx solid #e5e5e5; }
.panel-item text { font-size: 24rpx; color: #888; }