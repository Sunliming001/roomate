<view class="container">
  <!-- 消息列表 (使用 scroll-view 实现滚动) -->
  <scroll-view scroll-y class="chat-scroll" scroll-into-view="{{scrollId}}">
    <block wx:for="{{messages}}" wx:key="_id">
      <view class="msg-row {{item.isMe ? 'my-msg' : 'other-msg'}}" id="msg-{{index}}">
        <image class="avatar" src="{{item.avatar}}"></image>
        <view class="bubble">
          <text>{{item.content}}</text>
        </view>
      </view>
    </block>
    <!-- 底部占位，防止被输入框遮挡 -->
    <view id="bottom-pad" style="height: 120rpx;"></view>
  </scroll-view>

  <!-- 底部输入框 -->
  <view class="input-area">
    <input class="msg-input" value="{{inputVal}}" bindinput="onInput" placeholder="发送消息..." confirm-type="send" bindconfirm="send"/>
    <button class="send-btn" bindtap="send">发送</button>
  </view>
</view>