<view class="container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  (è¿”å›æŒ‰é’®) -->
  <view class="custom-nav" style="padding-top:{{statusBarHeight}}px; height:44px;">
    <view class="back-btn" bindtap="goBack">
      <text class="back-arrow">â†</text>
    </view>
  </view>

  <!-- é¡¶éƒ¨å¤§å›¾ -->
  <image src="{{info.cover}}" class="header-img" mode="aspectFill"></image>

  <!-- å†…å®¹å±‚ (ä¸Šæµ®å¡ç‰‡) -->
  <view class="content-layer">
    <!-- æ ‡é¢˜ä¸ä»·æ ¼ -->
    <view class="card glass">
      <view class="title-row">
        <text class="title">{{info.community}} {{info.layout.room}}å®¤</text>
        <text class="price-tag">Â¥{{info.totalPrice}}/æœˆ</text>
      </view>
      <view class="sub-info">
        <view class="tag">æœŸæœ›å…¥ä½: {{info.moveInDate}}</view>
        <view class="tag">ğŸ”¥ {{info.favCount || 0}}äººæ”¶è—</view>
      </view>
    </view>

    <!-- æˆ¿é—´è¯¦æƒ…è¡¨æ ¼ -->
    <view class="card">
      <view class="sec-title">æˆ¿é—´åˆ†é…æƒ…å†µ</view>
      <view class="room-list">
        <block wx:for="{{info.rooms}}" wx:key="index">
          <view class="room-item">
            <view class="r-left">
              <view class="r-name">{{item.name}}</view>
              <view class="r-area">{{item.area}}ã¡</view>
            </view>
            <view class="r-right">
              <view class="r-status {{item.status==1?'full':'empty'}}">
                {{item.status==1 ? 'å·²æœ‰äºº' : 'ç©ºç¼º (Â¥'+item.price+')'}}
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- æˆ¿ä¸»ä¿¡æ¯ -->
    <view class="card user-card">
       <image class="u-avt" src="{{info.publisher.avatar}}"></image>
       <view class="u-info">
         <view class="u-row">
            <text class="u-n">{{info.publisher.nickName}}</text>
            <text class="u-role">æˆ¿ä¸»</text>
         </view>
         <view class="u-tags">
           <text wx:for="{{info.publisher.tagList}}" wx:key="*this">{{item}}</text>
         </view>
       </view>
       <view class="chat-icon" bindtap="goChat">ğŸ’¬</view>
    </view>

    <!-- è¯¦ç»†æè¿° -->
    <view class="card">
      <view class="sec-title">æ‹›å‹Ÿè¯¦æƒ…</view>
      <text class="desc-text">{{info.desc}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨å ä½ -->
  <view style="height: 180rpx;"></view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="footer-bar">
    <view class="icon-btn" bindtap="handleFav">
      <text class="icon">{{info.isFav ? 'â˜…' : 'â˜†'}}</text>
      <text class="txt">{{info.isFav ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
    </view>
    <button class="action-btn" bindtap="handleJoin" disabled="{{info.status==='signed'}}">
      {{info.status==='signed' ? 'å·²ç­¾çº¦å®Œæˆ' : 'æˆ‘æƒ³åŠ å…¥'}}
    </button>
  </view>
</view>